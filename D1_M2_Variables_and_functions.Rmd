#### Let's start coding

First we need to create a new R script file. Make sure you are working in the `imd-r-training-intro` project that you just created. Click on the **New File** icon ![new file icon](images/NewFile.PNG) in the top left corner. In the dropdown, select **R Script**. The source pane will appear with an untitled empty script. Go ahead and save it by clicking the **Save** icon (and make sure the **Source on Save** checkbox is deselected). Call it `my_first_script.R`.

#### The basics

We'll start with something simple. Basic math in R is pretty straightforward and the syntax is similar to simply using a graphing calculator. To run a single line of code in your script, place your cursor anywhere in that line and press CTRL+ENTER (or click the **Run** button in the top right of the script pane). To run multiple lines of code, highlight the lines you want to run and hit CTRL+ENTER or click **Run**. Text following a hashtag/pound sign (#) will be ignored.

```{r ExecutingCode}
# By using this hashtag/pound sign, you are telling R to ignore the text afterwards. This is useful for leaving annotation of notes or instructions for yourself, or someone else using your code

# try this line to generate some basic text and become familiar with where results will appear:
print("Hello, lets do some basic math. Results of operations will appear here")

# one plus one
1+1

# two times three, divided by four
(2*3)/4

# basic mathematical and trigonometric functions are fairly similar to what they would be in excel

# calculate the square root of 9
sqrt(9)

# get the cosine of 180
cos(180)

# calculate 5 to the tenth power
5^10

```

Notice that when you run a line of code, the code and the result appear in the console. You can also type code directly into the console, but it won't be saved anywhere. As you get more comfortable with R, it can be helpful to use the console as a "scratchpad" for experimenting and troubleshooting. For now, it's best to err on the side of saving your code as a script so that you don't accidentally lose useful code.

#### Assigning variables

Occasionally, it's enough to just run a line of code and display the result in the console. But typically the code we write is more complex than adding one plus one, and when we execute a line of code, we want to be able to store the result and use it later in the script. This is where variables come in. Variables allow you to assign a value (whether that's a number, a data table, a chunk of text, or any other type of data that R can handle) to a short, human-readable name. Anywhere you put a variable in your code, R will replace it with its value when your code runs.
R uses the `<-` symbol for variable assignment. If you've used other programming languages (or remember high school algebra), you may be tempted to use `=` instead. It will work, but there are subtle differences between `<-` and `=`, so you should get in the habit of using `<-`.

```{r VariableAssignment}

# the value of 12.098 is assigned to variable 'a'
a <- 12.098

# and the value 65.3475 is assigned to variable 'b'
b <- 65.3475

# we can now perform whatever mathematical operations we want using these two variables without having to repeatedly type out the actual numbers:

a*b

(a^b)/((b+a))

sqrt((a^7)/(b*2))

```

In the code above, we assign the variables `a` and `b` once. We can then reuse them as often as we want. This is helpful because we save ourselves some typing, reduce the chances of making a typo somewhere, and if we need to change the value of `a` or `b`, we only have to do it in one place.

All of the examples you've seen so far are fairly contrived for the sake of simplicity. Let's take a look at some code that everyone here will make use of at some point: reading data from a CSV.

#### Reading data from CSV

It's hard to get very far in R without making use of *functions.* Think of a function as a black box that takes some kind of input (the *argument(s)*) from the user and outputs a result (the *return value*). 

![anatomy of a function](images/FunctionDiagram.PNG)

The read.csv function is used to bring in a dataset from a CSV file, and it stores the data in one of the fundamental data structures in R: a dataframe. It takes the file path to the CSV as input, and it outputs a dataframe containing the data from the CSV. We'll talk a lot about dataframes in this class, but for the moment just know that it's a table of data with rows and columns.
Once you have read the data in, you can take a quick look at its structure by typing the name of the variable it's stored in.

```{r ReadingData}

# read in the data from tree_growth.csv and assign it as a dataframe to the variable "tree_data"
tree_data <- read.csv(here::here("data", "tree_growth.csv"))

# display the 'tree_data' data frame we just created
tree_data

```

#### Examining datasets

Compared to scrolling through a dataset in Excel, examining a dataset in R can feel unintuitive at first. Stick with it, though. Once you get used to exploring data in R, you'll find that R will help you learn more about your dataset in a more efficient manner.

```{r ExaminingData}
#this line uses the 'head' function to view only the very top of the dataframe. The function is useful for taking a quick glance to ensure that column names were properly assigned, and to take a quick look a column names without printing the whole dataset
head(tree_data)

#now that we have out dataframe, let look at some basic characteristics

#the 'summary' function will give us some basic statistical information about the dataset
summary(tree_data)

#the printed results give basic statistics about each of the numerical columns in the dataframe

#the summary function can also be used only on a specific column within the dataframe. The '$' symbol is used to specify a specific column.
#this line will calculate basic stats for the DBH column in the dataset
summary(tree_data$DBH_in)

#when targeting a specific column in a dataset, you are essentially looking at a second type of data structure in R: a list. A list can be created like so:
#this line will create a list of values assiged to the variable 'DBH_list' based on those in the DBH column of our dataset:
DBH_list <- tree_data$DBH_in
#this will then print the values in the list
DBH_list

#if we wanted to manually calculate basic statistics about the list we just created, or any column in the original dataframe, the syntax is fairly similar to excel:

#to calculate the mean of the 'age' column in the original dataframe:

mean(tree_data$Age_yr)

#or to calculate the mean of the DBH list we created:
mean(DBH_list)

#like-wise for the median, standard deviation, and minimum:

median(tree_data$Age_yr)
sd(tree_data$Age_yr)
min(tree_data$Age_yr)

#for columns with character values, in this case, the species name, the 'unique' function will give you a list of each individual value in a column or list
#in this line, we are printing all of the unique species names in the dataset (in this case 2). In the second line, we generate a list of these unique names assigned as a list to the variable 'names'
unique(tree_data$Species)
names <- unique(tree_data$Species)

```

Applied example 


```{r}
#so lets say we want to convert the 'Height_ft' column in the dataset from feet to inches. 

#lets start by assigning a conversion factor to the letter 'x'. Since there are 12 inches in a foot, we will assign 'x' to equal 12
x <- 12

#we can then use this conversion factor to convert the 'Height_ft' column to inches, and place this converted value in a new column we will create in the dataframe:

#here we are specifying the new column on the left side of the '<-', and telling R what we want put into it on the right side of the '<-'.

tree_data$Height_in <- tree_data$Height_ft * x

#the new column will be calculated by multiplying the value of 'Height_ft' in each row by the conversion factor from feet to inches that we have assigned to 'x'

#we can now use the 'head function to check our work, and make sure the proper conversion was carried out:
head(tree_data)

#there now should be a column below called 'Height_in' representing the height of each tree in the dataframe
```


Basic visualization of dataframes

```{r}

#so lets explore the basic tools for taking a first glance at our data, starting with a histogram

#this line generates a basic histogram plot of a specific column in the dataframe (denoted again by the $ sign) using the 'hist' function. Here, we will make a histogram of the 'Age_yr' column

hist(tree_data$Age_yr)

#looking at the histogram, we can see that the age of most trees in the dataset fall in the 0-20 year old age class.

#The data frame also includes information on DBH, and height of the trees. What if we want to quickly take a look at how these two variables relate to one another?

# to get a basic plot, you can use the 'plot' function!:
#following the call for the plot function, you will assign a column to be the x value or independent variable column (age) again using the $, followed by a comma and then the y value or dependent variable, in this instance height:
plot(tree_data$Age_yr, tree_data$Height_ft)

# this should generate an ugly but effective scatterplot of the two variables below. It would appear that older trees are taller!


# lets try the same, but with DBH as the dependent variable on the y axis:

plot(tree_data$Age_yr, tree_data$DBH_in)

# again, we should see a plot below showing that, even in a make-believe forest, older trees of both species tend to be thicker!



```
Annotated versus non-annotated code, and the value of assigning variables- still working that out