<h2>Day 1</h2>
<details><summary class='ques2'>Question 1: How do you find the value of the 3rd row of domSpp?</summary>
```{r, c105,echo=T, results='show'}
df[3, c("domSpp")] # option 1
df[3, 4] # option 2
```
</details>
<br>
<details><summary class='ques2'>Question 2: How would you make numtrees an integer?</summary> 
```{r, c106,echo=T, results='show'}
df$numtrees <- as.integer(df$numtrees)
str(df)
```
</details>
<br>

<details><summary class='ques2'>Question 3: How would you change the second row in invasive_pres from FALSE to TRUE?</summary> 
```{r, c106b,echo=T, results='show'}
df$invasive_pres[2] <- TRUE
head(df)
```
</details>
<br>


<details><summary class='ques2'>Question 4: How would you calculate the percent of trees that are dead in the df data frame?</summary>
```{r, c107,echo=T, results='hide'}
# base R version (2 options)
df$numdead <- df$numtrees - df$numLive
df$pctdead <- df$numdead/df$numtrees*100

df$pctdead <- with(df, (numtrees - numLive)/numtrees*100)

# tidyverse version (2 options)
df <- df %>% mutate(numdead = numtrees - numLive,
                    pctdead = numdead/numtrees*100)

df <- df %>% mutate(pctdead = (numtrees - numLive)/numtrees*100)
```
</details>
<br>

<details><summary class='ques2'>Question 5: What is the smallest number of dead trees observed in the df dataset?</summary>
```{r c107b, echo=T, results='show'}
min(df$numdead) # uses numdead column calculated for previous question. 
summary(df$numdead)[1] #Min. is the record summary reports for numeric columns
```
</details>
<br>

<details><summary class='ques2'>Question 6: How would you select only Invasive species records?</summary>
```{r, c108, echo=T, results='hide'}
wetinv <- wetdat[wetdat$Invasive == TRUE, ] # base R bracket-based solution
wetinv2 <- subset(wetdat, Invasive == TRUE) # another base R solution
wetinv_tidy <- wetdat %>% filter(Invasive == TRUE) # tidyverse solution
```
</details>
<br>

<details><summary class='ques2'>Question 7: Which sites have both Arethusa bulbosa and Carex exilis present?</summary>
```{r, c109,echo=T, results='show'}
# Base R solution
wetspp <- wetdat[wetdat$Latin_Name %in% c("Arethusa bulbosa", "Carex exilis"),]
sort(unique(wetspp$Site_Name))

# Tidyverse solution
wetspp_tidy <- wetdat %>% filter(Latin_Name %in% c("Arethusa bulbosa", "Carex exilis")) 
sort(unique(wetspp_tidy$Site_Name)) # RAM-05 and SEN-01 have both species present
```
</details>
<br>

<details><summary class='ques2'>Question 8: How would you sort the wetdat by Ave_Cov (high to low) and Latin_Name?</summary>
```{r, c109b, echo=T, results='show'}
wetdat_sort <- wetdat[order(-wetdat$Ave_Cov, wetdat$Latin_Name), ] # base R
head(wetdat_sort)
wetdat_sort_tidy <- wetdat %>% arrange(-Ave_Cov, Latin_Name) #tidyverse
head(wetdat_sort_tidy)
```
</details>
<br>
<h2>Day 2</h2>
<details><summary class='ques2'>Question 1: There's a Latin name that needs to be fixed (hint look for non-letter symbols). How would you find that record?</summary>

```{r, c110, echo=T, results='show'}
sort(unique(wetdat$Latin_Name))[1:10] # Low-tech way: use your eyes to spot the "Alnus incana++". I truncated to first 10.

# The regular expression way to find non-alphabetical symbols (now you know why I didn't cover this).
wetdat$Latin_Name[grep("[^[:alpha:]]+$", wetdat$Latin_Name)] # looks for anything not A-Z or a-z in entire record 
  # ^ and +$ are telling R to start with first word and check every following word within a record.
  # This took longer than I'd like to admit to make work, by the way.

```
</details>
<br>

<details><summary class='ques2'>Question 2: Now that you've found it, fix it, and check that you fixed it.</summary>
```{r, c110b, echo=T, results='show'}
wetdat$Latin_Name[wetdat$Latin_Name == "Alnus incana++"] <- "Alnus incana"
wetdat$Latin_Name[grep("[^[:alpha:]]+$", wetdat$Latin_Name)] # regex approach 
sort(unique(wetdat$Latin_Name))[1:10] # using your eyes approach

```

</details>
<br>

<details><summary class='ques2'>Question 3: Question 3: How would you take only the plots on MDI (eg Unit_ID = "ACAD_MDI") in the loc table and join them to their corresponding visits in the events table?</summary>
```{r, c111,echo=T, results='hide'}
# Step by step:
head(loc)
loc_MDI <- loc %>% filter(Unit_ID == "ACAD_MDI")
locev_MDI <- left_join(loc_MDI, event, by = "Location_ID")

# All in one:
locev_MDI2 <- loc %>% filter(Unit_ID == "ACAD_MDI") %>% 
                      left_join(event, by = "Location_ID")

```
</details>
<br>

<details><summary class='ques2'>Question 4: How would you join the stand data to the locev table (the one we made that dropped QAQC events)?</summary>
```{r, c111b, echo=T}
locev <- merge(loc, event[event$Event_QAQC == FALSE, ], all.x = TRUE, all.y = TRUE)
intersect(names(locev), names(stand))
locev_stand <- merge(locev, stand, by = "Event_ID", all.x = TRUE, all.y = TRUE) #base R
locev_stand_tidy <- full_join(locev, stand, by = "Event_ID")
```

</details>
<br>

<h2>Day 3</h2>
<details><summary class='ques2'>Question 1: How many plots were sampled in ACAD in 2018?</summary>
```{r, c112,echo=T}
acad <- joinLocEvent(park = "ACAD", from = 2018, to = 2018)
length(unique(acad$Plot_Number))
```
</details>
<br>

<details><summary class='ques2'>Question 2: Which plot in ACAD has the highest density of live trees in the 90-99.9cm size class for any year?</summary>
```{r, c113,echo=T}
acad_tree_dist <- sumTreeDBHDist(park = "ACAD", status = 'live')

acad_tree_max70 <- acad_tree_dist %>% arrange(desc(d70_79.9))
head(acad_tree_max70) # ACAD-124

# If you wanted to pull out the top record for that size class, you can also do one of the two options below
acad_top_70 <- acad_tree_dist[which.max(acad_tree_dist$d70_79.9),] #The ugly base R approach 
acad_top_70_tidy <- acad_tree_dist %>% arrange(desc(d70_79.9)) %>% slice(1) #The tidyverse approach
head(acad_top_70)
```
</details>
<br>
<details><summary class='ques2'>Question 3: How would you create a wide matrix for ACAD plots in 2019 that has plots for rows, and exotic species as columns?</summary>

```{r, c114,echo=T}
acad_exo <- makeSppList(park = "ACAD", from = 2019, to = 2019, speciesType = "exotic") 
acad_exo <- acad_exo %>% mutate(present = ifelse(Exotic == TRUE & !is.na(Exotic), 1, 0))
head(acad_exo)

# Old school spread version
acad_wide_spread <- acad_exo %>% select(Plot_Name, Latin_Name, present) %>% 
                                 arrange(Latin_Name, Plot_Name) %>% 
                                 spread("Latin_Name", "present", fill = 0)

# Newer pivot version
acad_wide_pivot <- acad_exo %>% select(Plot_Name, Latin_Name, present) %>% 
                                arrange(Latin_Name, Plot_Name) %>% 
                                pivot_wider(names_from = "Latin_Name", 
                                            values_from = "present",
                                            values_fill = 0) 

head(acad_wide_pivot)
```
</details>
<br>

<details><summary class='ques2'>Question 4: Take the acad_final graph and make 2 more changes to it.</summary>

You may have chosen other things to do than I did. Here are a couple of changes to the ggplot bar chart
```{r, c115,echo=T}

 ggplot(data = acad_stats, aes(x = size_class_fact, y = mean_dens))+
              geom_bar(stat = 'identity', fill = "steelblue4")+
              geom_errorbar(aes(ymin = mean_dens - se_dens, ymax = mean_dens + se_dens), width = 0.2, lwd = 0.7)+
              labs(x = "Regeneration Size Class", y = "Stems per sq.m")+
              theme_FHM()+
              theme(axis.text.x = element_text(angle = 45, hjust = 1))+ #hjust is centering horizontally
              scale_x_discrete(labels = c('15-30cm', '30-100cm', '100-150cm', '>150cm', '1-10cm DBH'))
             
```

Note that width = 0.2 in the geom_errorbar is the width of the caps on the bars. lwd is the weight of the line. 
</details>
<br>